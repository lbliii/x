

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Install Determined &#8212; project-x 0.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'latest/setup-cluster/deploy-cluster/aws/install-on-aws';</script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Deploy on GCP" href="../gcp/_index.html" />
    <link rel="prev" title="Deploy Determined with Dynamic Agents" href="dynamic-agents-aws.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../../index.html">
  
  
  
  
  
    <p class="title logo__title">project-x 0.0.1 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../index.html">
                    Welcome to project-x’s documentation!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../architecture/_index.html">How Determined Works</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/introduction.html">Introduction to Determined</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/system-architecture.html">System Architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../example-solutions/_index.html">Examples</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../integrations/_index.html">Integrations</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../integrations/ecosystem/_index.html">Ecosystem Integration</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../integrations/notification/_index.html">Monitoring Experiment Through Webhooks</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../integrations/notification/zapier.html">Through Zapier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../integrations/notification/slack.html">Through Slack</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../integrations/prometheus/_index.html">Configure Determined with Prometheus and Grafana</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../interfaces/_index.html">Tools</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/cli-ug.html">Determined CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/commands-and-shells.html">Commands and Shells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/ide-integration.html">IDE Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/notebooks.html">Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/proxy-ports.html">Exposing Custom Ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/tensorboard.html">Using TensorBoard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../interfaces/webui-if.html">Web Interface (WebUI)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../model-dev-guide/_index.html">Model Developer Guide</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../model-dev-guide/apis-howto/_index.html">Training APIs</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/apis-howto/api-core-ug.html">Core API User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/apis-howto/api-pytorch-ug.html">PyTorch API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/apis-howto/api-keras-ug.html">Keras API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/apis-howto/api-estimator-ug.html">Estimator API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../model-dev-guide/batch-processing/_index.html">Torch Batch Processing API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../model-dev-guide/best-practices/_index.html">Best Practices</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../model-dev-guide/dtrain/_index.html">Distributed Training with Determined</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/dtrain/dtrain-introduction.html">Distributed Training Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/dtrain/dtrain-implement.html">Implementing Distributed Training</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/dtrain/config-templates.html">Configuration Templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/dtrain/reproducibility.html">Reproducibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-dev-guide/dtrain/optimize-training.html">Optimizing Training</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../model-hub-library/_index.html">Model Hub Library</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../model-hub-library/mmdetection/_index.html">MMDetection</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../model-hub-library/transformers/_index.html">Transformers</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../model-hub-library/transformers/tutorial.html">Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../model-hub-library/transformers/examples.html">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../reference/_index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/cli-reference.html">Determined CLI Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/python-sdk.html">Python SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/rest-api.html">REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/batch-processing/_index.html">Batch Processing API Reference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/deploy/_index.html">Deployment Reference</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../reference/deploy/config/_index.html">Config Reference</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/deploy/config/agent-config-reference.html">Agent Configuration Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/deploy/config/common-config-options.html">Common Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/deploy/config/helm-config-reference.html">Helm Chart Configuration Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../reference/deploy/config/master-config-reference.html">Master Configuration Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/interface/_index.html">Job Configuration Reference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/model-hub/_index.html">Model Hub APIs</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/model-hub/mmdetection-api.html">MMDetection API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/model-hub/transformers-api.html">Transformers API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../reference/searcher/_index.html">Custom Searcher Reference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../reference/training/_index.html">Training Reference</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-core-reference.html"><code class="docutils literal notranslate"><span class="pre">det.core</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-deepspeed-reference.html"><code class="docutils literal notranslate"><span class="pre">det.pytorch.deepspeed</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-det-reference.html"><code class="docutils literal notranslate"><span class="pre">det</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-estimator-reference.html"><code class="docutils literal notranslate"><span class="pre">det.estimator</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-keras-reference.html"><code class="docutils literal notranslate"><span class="pre">det.keras</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-pytorch-reference.html"><code class="docutils literal notranslate"><span class="pre">det.pytorch</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/api-pytorch-samplers-reference.html"><code class="docutils literal notranslate"><span class="pre">det.pytorch.samplers</span></code> API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../reference/training/experiment-config-reference.html">Experiment Configuration Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/_index.html">Release Notes</a></li>

<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../_index.html">Setup</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../_index.html">Set Up Determined</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active has-children"><a class="reference internal" href="_index.html">Deploy on AWS</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="aws-spot.html">Use Spot Instances</a></li>
<li class="toctree-l4"><a class="reference internal" href="dynamic-agents-aws.html">Deploy Determined with Dynamic Agents</a></li>
<li class="toctree-l4 current active"><a class="current reference internal" href="#">Install Determined</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../gcp/_index.html">Deploy on GCP</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../gcp/dynamic-agents-gcp.html">Deploy Determined with Dynamic Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gcp/install-gcp.html">Install Determined</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../k8s/_index.html">Deploy on Kubernetes</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../k8s/custom-pod-specs.html">Customize a Pod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/helm-commands.html">Helm and Kubectl Command Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/install-on-kubernetes.html">Install Determined on Kubernetes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/k8s-dev-guide.html">Development Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/setup-aks-cluster.html">Set up and Manage an Azure Kubernetes Service (AKS) Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/setup-eks-cluster.html">Set up and Manage an AWS Kubernetes (EKS) Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/setup-gke-cluster.html">Set up and Manage a Google Kubernetes Engine (GKE) Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="../k8s/troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../on-prem/_index.html">Deploy on Prem</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../on-prem/deploy.html">Install Determined Using <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../on-prem/docker.html">Install Determined Using Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../on-prem/homebrew.html">Install Determined Using Homebrew (macOS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../on-prem/linux-packages.html">Install Determined Using Linux Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../on-prem/requirements.html">Installation Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../on-prem/wsl.html">Install Determined Using Windows Subsystem for Linux (Windows)</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../slurm/_index.html">Deploy on Slurm/PBS</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../slurm/hpc-launching-architecture.html">HPC Launching Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../slurm/hpc-security-considerations.html">HPC Launcher Security Considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../slurm/install-on-slurm.html">Install Determined on Slurm/PBS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../slurm/singularity.html">Provide a Container Image Cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../slurm/slurm-known-issues.html">Known Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../slurm/slurm-requirements.html">Installation Requirements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../security/_index.html">Security</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../security/oauth.html">OAuth 2.0 Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/oidc.html">OpenID Connect Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/rbac.html">RBAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/saml.html">SAML Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/scim.html">SCIM Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../security/tls.html">Transport Layer Security</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../tutorials/_index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/pytorch-mnist-local-qs.html">Run Your First Experiment in Determined</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/pytorch-mnist-tutorial.html">PyTorch MNIST Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/pytorch-porting-tutorial.html">PyTorch Porting Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/quickstart-mdldev.html">Quickstart for Model Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tutorials/tf-mnist-tutorial.html">TensorFlow Keras Fashion MNIST Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../attributions.html">Open Source Licenses</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../_sources/latest/setup-cluster/deploy-cluster/aws/install-on-aws.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Install Determined</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#det-deploy-tool"><code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> tool</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying">Deploying</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deployment-types">Deployment Types</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cli-arguments">CLI Arguments</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spinning-up-or-updating-the-cluster">Spinning up or updating the Cluster</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tearing-down-the-cluster">Tearing Down the Cluster</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-clusters">Listing Clusters</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#printing-the-default-master-yaml-template">Printing the default <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> template</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-master-yaml-templates">Custom master.yaml templates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modifying-a-deployment">Modifying a Deployment</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-deployment">Manual Deployment</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#database">Database</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#security-groups">Security Groups</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#master">Master</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#agent">Agent</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iam-roles">IAM Roles</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Master</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Agent</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#master-node">Master Node</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="install-determined">
<span id="install-aws"></span><h1>Install Determined<a class="headerlink" href="#install-determined" title="Permalink to this heading">#</a></h1>
<p>This user guide describes how to deploy a Determined cluster on Amazon Web Services (AWS). The
<a class="reference internal" href="#determined-deploy"><span class="std std-ref">det deploy</span></a> tool makes it easy to create and install these resources. If
you would rather create the cluster manually, see the <a class="reference internal" href="#aws-manual-deployment"><span class="std std-ref">Manual Deployment</span></a> section below.</p>
<p>For more information about using Determined on AWS, see the <a class="reference internal" href="_index.html#topic-guide-aws"><span class="std std-ref">Deploy on AWS</span></a> topic guide.</p>
<section id="det-deploy-tool">
<span id="determined-deploy"></span><h2><code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> tool<a class="headerlink" href="#det-deploy-tool" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> tool is provided by the <code class="docutils literal notranslate"><span class="pre">determined</span></code> Python package. It uses <a class="reference external" href="https://aws.amazon.com/cloudformation/">AWS
CloudFormation</a> to automatically deploy and configure a
Determined cluster. CloudFormation builds the necessary components for Determined into a single
CloudFormation stack.</p>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Either AWS credentials or an IAM role with permissions to access AWS CloudFormation APIs. See the
<a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html">AWS Documentation</a>
for information on how to use AWS credentials.</p></li>
<li><p>An <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">AWS EC2 Keypair</a>.</p></li>
</ul>
<p>You may also want to increase the <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-resource-limits.html">EC2 instance limits</a> on your account
— the <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-on-demand-instances.html#ec2-on-demand-instances-limits">default instance limits</a>
on GPU instances are zero. The default configuration for <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> can result in launching up
to 5 <code class="docutils literal notranslate"><span class="pre">g4dn.metal</span></code> instances (which have 94 vCPUs each), which would exceed the default quota. AWS
instance limits can be increased by submitting a request to the <a class="reference external" href="https://console.aws.amazon.com/support/home?#/case/create?issueType=service-limit-increase&amp;limitType=service-code-ec2-instances">AWS Support Center</a>.</p>
</section>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">det</span></code> command line tool can be installed using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">determined</span>
</pre></div>
</div>
</section>
<section id="deploying">
<h3>Deploying<a class="headerlink" href="#deploying" title="Permalink to this heading">#</a></h3>
<p>The basic command to deploy a cluster is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="n">up</span> <span class="o">--</span><span class="n">cluster</span><span class="o">-</span><span class="nb">id</span> <span class="n">CLUSTER_ID</span> <span class="o">--</span><span class="n">keypair</span> <span class="n">KEYPAIR_NAME</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">CLUSTER_ID</span></code> is an arbitrary unique ID for the new cluster. We recommend choosing a cluster ID
that is memorable and helps identify what the cluster is being used for. The cluster ID will be used
as the AWS CloudFormation stack name.</p>
<p><code class="docutils literal notranslate"><span class="pre">KEYPAIR_NAME</span></code> is the name of the AWS EC2 key pair to use when provisioning the cluster. If the
AWS CLI is installed on your machine, you can get a list of the available keypair names by running
<code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">ec2</span> <span class="pre">describe-key-pairs</span></code>.</p>
<p>The deployment process may take 5–10 minutes. When it completes, summary information about the
newly deployed cluster will be printed, including the URL of the Determined master.</p>
</section>
<section id="deployment-types">
<span id="determined-deploy-deployment-types"></span><h3>Deployment Types<a class="headerlink" href="#deployment-types" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> supports multiple deployment types to work with different security needs. The
deployment type can be specified using the <code class="docutils literal notranslate"><span class="pre">--deployment-type</span></code> argument (e.g., <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span> <span class="pre">aws</span>
<span class="pre">--deployment-type</span> <span class="pre">secure</span></code>).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">simple</span></code>: The simple deployment provides an easy way to deploy a Determined cluster in AWS.
This creates the master instance in the default subnet for the account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efs</span></code>: The EFS deployment creates an <a class="reference external" href="https://aws.amazon.com/efs/">EFS</a> file system and a
Determined cluster into a separate VPC. The EFS drive attaches to agent instances at
<code class="docutils literal notranslate"><span class="pre">/mnt/efs</span></code>. This path is automatically bind-mounted into the task containers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fsx</span></code>: The FSX deployment creates a <a class="reference external" href="https://aws.amazon.com/fsx/lustre/">Lustre FSx</a> file
system and a Determined cluster into a separate VPC. The FSx drive attaches to agent instances at
<code class="docutils literal notranslate"><span class="pre">/mnt/fsx</span></code>. This path is automatically bind-mounted into the task containers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">secure</span></code>: The secure deployment creates resources to lock down the Determined cluster. These
resources are:</p>
<ul>
<li><p>A VPC with a public and private subnet</p></li>
<li><p>A NAT gateway for the private subnet to make outbound connections</p></li>
<li><p>An S3 VPC gateway so the private subnet can access S3</p></li>
<li><p>A bastion instance in the public subnet</p></li>
<li><p>A master instance in the private subnet</p></li>
</ul>
</li>
</ul>
</section>
<section id="cli-arguments">
<h3>CLI Arguments<a class="headerlink" href="#cli-arguments" title="Permalink to this heading">#</a></h3>
<section id="spinning-up-or-updating-the-cluster">
<h4>Spinning up or updating the Cluster<a class="headerlink" href="#spinning-up-or-updating-the-cluster" title="Permalink to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="n">up</span> <span class="o">--</span><span class="n">cluster</span><span class="o">-</span><span class="nb">id</span> <span class="n">CLUSTER_ID</span> <span class="o">--</span><span class="n">keypair</span> <span class="n">KEYPAIR_NAME</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 50.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cluster-id</span></code></p></td>
<td><p>Unique ID for the cluster (used as the CloudFormation stack name).</p></td>
<td><p><em>required</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--keypair</span></code></p></td>
<td><p>The name of the AWS EC2 key pair to use for both master and agent instances.</p></td>
<td><p><em>required</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--region</span></code></p></td>
<td><p>AWS region to deploy into.</p></td>
<td><p>The default region for the AWS user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--profile</span></code></p></td>
<td><p>AWS profile to use for deploying cluster resources.</p></td>
<td><p>default</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--master-instance-type</span></code></p></td>
<td><p>AWS instance type to use for the master.</p></td>
<td><p>m5.large</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--aux-agent-instance-type</span></code></p></td>
<td><p>AWS instance type to use for the agents in the auxiliary resource pool. Must be one of the
following instance types: <code class="docutils literal notranslate"><span class="pre">g4dn.xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.2xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.4xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">g4dn.8xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.16xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.12xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.metal</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">g5.2xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.4xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.8xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.12xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.16xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">g5.24xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.48large</span></code>, <code class="docutils literal notranslate"><span class="pre">p3.2xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">p3.8xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">p3.16xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">p3dn.24xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">p4d.24xlarge</span></code>, or any general purpose instance types (<code class="docutils literal notranslate"><span class="pre">t2</span></code>, <code class="docutils literal notranslate"><span class="pre">t3</span></code>,
<code class="docutils literal notranslate"><span class="pre">c4</span></code>, <code class="docutils literal notranslate"><span class="pre">c5</span></code>, <code class="docutils literal notranslate"><span class="pre">m4</span></code>, <code class="docutils literal notranslate"><span class="pre">m5</span></code> and variants).</p></td>
<td><p>t2.xlarge</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--compute-agent-instance-type</span></code></p></td>
<td><p>AWS instance type to use for the agents in the compute resource pool. For GPU-based
training, must be one of the following instance types: <code class="docutils literal notranslate"><span class="pre">g4dn.xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.2xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">g4dn.4xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.8xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.16xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.12xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g4dn.metal</span></code>,
<code class="docutils literal notranslate"><span class="pre">g5.xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.2xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.4xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.8xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.12xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">g5.16xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.24xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">g5.48large</span></code>, <code class="docutils literal notranslate"><span class="pre">p3.2xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">p3.8xlarge</span></code>,
<code class="docutils literal notranslate"><span class="pre">p3.16xlarge</span></code>, <code class="docutils literal notranslate"><span class="pre">p3dn.24xlarge</span></code>, or <code class="docutils literal notranslate"><span class="pre">p4d.24xlarge</span></code>. For CPU-based training or testing,
any general purpose instance type may be used (<code class="docutils literal notranslate"><span class="pre">t2</span></code>, <code class="docutils literal notranslate"><span class="pre">t3</span></code>, <code class="docutils literal notranslate"><span class="pre">c4</span></code>, <code class="docutils literal notranslate"><span class="pre">c5</span></code>, <code class="docutils literal notranslate"><span class="pre">m4</span></code>,
<code class="docutils literal notranslate"><span class="pre">m5</span></code> and variants).</p></td>
<td><p>g4dn.metal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--deployment-type</span></code></p></td>
<td><p>The <a class="reference internal" href="#determined-deploy-deployment-types"><span class="std std-ref">deployment type</span></a> to use.</p></td>
<td><p>simple</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--inbound-cidr</span></code></p></td>
<td><p>CIDR range for inbound traffic.</p></td>
<td><p>0.0.0.0/0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--db-password</span></code></p></td>
<td><p>The password for <code class="docutils literal notranslate"><span class="pre">postgres</span></code> user for database.</p></td>
<td><p>postgres</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--max-aux-containers-per-agent</span></code></p></td>
<td><p>The maximum number of containers to launch on each agent in the default auxiliary
<a class="reference internal" href="../../../architecture/introduction.html#resource-pools"><span class="std std-ref">resource pool</span></a>.</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--max-idle-agent-period</span></code></p></td>
<td><p>The length of time to wait before idle dynamic agents will be automatically terminated.</p></td>
<td><p>10m (10 minutes)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--max-dynamic-agents</span></code></p></td>
<td><p>Maximum number of dynamic agent instances in the default compute <a class="reference internal" href="../../../architecture/introduction.html#resource-pools"><span class="std std-ref">resource pool</span></a>.</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--spot</span></code></p></td>
<td><p>Use spot instances for the default auxiliary and compute resource pools.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--spot-max-price</span></code></p></td>
<td><p>The maximum price to use when launching spot instances. If the current spot market price
exceeds this value, Determined will not create new instances. If no maximum price is
configured, the maximum price will be the on-demand price for the configured instance type
and region.</p></td>
<td><p>Not set</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--dry-run</span></code></p></td>
<td><p>Print the template but do not execute it.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--master-config-template-path</span></code></p></td>
<td><p>Path to the custom <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> template. Default template can be obtained using <code class="docutils literal notranslate"><span class="pre">det</span>
<span class="pre">deploy</span> <span class="pre">aws</span> <span class="pre">dump-master-config-template</span></code>.</p></td>
<td><p>Not set</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--efs-id</span></code></p></td>
<td><p>Preexisting EFS file system that will be mounted into the task containers; if not provided,
a new EFS instance will be created. The agents must be able to connect to the EFS instance.
This option can only be used together with the <code class="docutils literal notranslate"><span class="pre">efs</span></code> <a class="reference internal" href="#determined-deploy-deployment-types"><span class="std std-ref">deployment type</span></a>.</p></td>
<td><p>Not set</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--fsx-id</span></code></p></td>
<td><p>Preexisting FSx file system that will be mounted into the task containers; if not provided,
a new FSx instance will be created. The agents must be able to connect to the FSx instance.
This option can only be used together with the <code class="docutils literal notranslate"><span class="pre">fsx</span></code> <a class="reference internal" href="#determined-deploy-deployment-types"><span class="std std-ref">deployment type</span></a>.</p></td>
<td><p>Not set</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--shut-down-on-connection-loss</span></code>, <code class="docutils literal notranslate"><span class="pre">--no-shut-down-on-connection-loss</span></code></p></td>
<td><p>Whether or not agent instances should automatically shut down when they lose connection to
the master.</p></td>
<td><p>Shut down automatically</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tearing-down-the-cluster">
<h4>Tearing Down the Cluster<a class="headerlink" href="#tearing-down-the-cluster" title="Permalink to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="n">down</span> <span class="o">--</span><span class="n">cluster</span><span class="o">-</span><span class="nb">id</span> <span class="n">CLUSTER_ID</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 50.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cluster-id</span></code></p></td>
<td><p>Unique ID for the cluster (used as the CloudFormation stack name).</p></td>
<td><p><em>required</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--region</span></code></p></td>
<td><p>AWS region deployed into.</p></td>
<td><p>The default region for the AWS user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--profile</span></code></p></td>
<td><p>AWS profile used for deploying cluster resources.</p></td>
<td><p>default</p></td>
</tr>
</tbody>
</table>
</section>
<section id="listing-clusters">
<h4>Listing Clusters<a class="headerlink" href="#listing-clusters" title="Permalink to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="nb">list</span>
</pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 50.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--region</span></code></p></td>
<td><p>AWS region to deploy into.</p></td>
<td><p>The default region for the AWS user</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--profile</span></code></p></td>
<td><p>AWS profile used for deploying cluster resources.</p></td>
<td><p>default</p></td>
</tr>
</tbody>
</table>
</section>
<section id="printing-the-default-master-yaml-template">
<h4>Printing the default <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> template<a class="headerlink" href="#printing-the-default-master-yaml-template" title="Permalink to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="n">dump</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">template</span>
</pre></div>
</div>
</section>
</section>
<section id="custom-master-yaml-templates">
<span id="aws-master-yaml-template"></span><h3>Custom master.yaml templates<a class="headerlink" href="#custom-master-yaml-templates" title="Permalink to this heading">#</a></h3>
<p>Advanced users who require a deep customization of master settings (i.e., the <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> config
file) can use the <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> templating feature. Since <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span> <span class="pre">aws</span></code> fills in plenty of
infrastructure-related values such as VPC subnet ids or IAM instance profile roles, we provide a
simplified templating solution, similar to <a class="reference internal" href="../k8s/install-on-kubernetes.html#install-on-kubernetes"><span class="std std-ref">helm charts in kubernetes</span></a>.
Template language is based on golang templates, and includes <code class="docutils literal notranslate"><span class="pre">sprig</span></code> helper library and <code class="docutils literal notranslate"><span class="pre">toYaml</span></code>
serialization helper.</p>
<p>Example workflow:</p>
<ol class="arabic">
<li><p>Get the default template using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="n">dump</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">template</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">master</span><span class="o">.</span><span class="n">yaml</span><span class="o">.</span><span class="n">tmpl</span>
</pre></div>
</div>
</li>
<li><p>Customize the template as you see fit by editing it in any text editor. For example, let’s say a
user wants to utilize (default) <code class="docutils literal notranslate"><span class="pre">g4dn.metal</span></code> 8-GPU instances for the <a class="reference internal" href="../../../architecture/introduction.html#resource-pools"><span class="std std-ref">default compute pool</span></a>, but they also often run single-GPU notebook jobs, for which a single
<code class="docutils literal notranslate"><span class="pre">g4dn.xlarge</span></code> instance would be perfect. So, you want to add a third pool <code class="docutils literal notranslate"><span class="pre">compute-pool-solo</span></code>
with a customized instance type.</p>
<p>Start with the default template, and find the <code class="docutils literal notranslate"><span class="pre">resource_pools</span></code> section:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">resource_pools</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pool_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aux-pool</span>
<span class="w">    </span><span class="nt">max_aux_containers_per_agent</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">.resource_pools.pools.aux_pool.max_aux_containers_per_agent</span><span class="w"> </span><span class="p p-Indicator">}}</span>
<span class="w">    </span><span class="nt">provider</span><span class="p">:</span>
<span class="w">      </span><span class="nt">instance_type</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">.resource_pools.pools.aux_pool.instance_type</span><span class="w"> </span><span class="p p-Indicator">}}</span>
<span class="w">      </span><span class="p p-Indicator">{{</span><span class="nv">- toYaml .resource_pools.aws | nindent 6</span><span class="p p-Indicator">}}</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pool_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute-pool</span>
<span class="w">    </span><span class="nt">max_aux_containers_per_agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">provider</span><span class="p">:</span>
<span class="w">      </span><span class="nt">instance_type</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">.resource_pools.pools.compute_pool.instance_type</span><span class="w"> </span><span class="p p-Indicator">}}</span>
<span class="w">      </span><span class="nt">cpu_slots_allowed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="p p-Indicator">{{</span><span class="nv">- toYaml .resource_pools.aws | nindent 6</span><span class="p p-Indicator">}}</span>
</pre></div>
</div>
<p>Then, append a new section:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pool_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compute-pool-solo</span>
<span class="w">  </span><span class="nt">max_aux_containers_per_agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">provider</span><span class="p">:</span>
<span class="w">    </span><span class="nt">instance_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">g4dn.xlarge</span>
<span class="w">    </span><span class="p p-Indicator">{{</span><span class="nv">- toYaml .resource_pools.aws | nindent 6</span><span class="p p-Indicator">}}</span>
</pre></div>
</div>
</li>
<li><p>Use the new template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">det</span> <span class="n">deploy</span> <span class="n">aws</span> <span class="o">&lt;</span><span class="n">ALL</span> <span class="n">PREVIOUSLY</span> <span class="n">USED</span> <span class="n">FLAGS</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">master</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">edited</span><span class="o">/</span><span class="n">master</span><span class="o">.</span><span class="n">yaml</span><span class="o">.</span><span class="n">tmpl</span>
</pre></div>
</div>
</li>
<li><p>All set! Check the <cite>Cluster</cite> page in WebUI to ensure your cluster has 3 resource pools. In case
of errors, ssh to the master instance as instructed by <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span> <span class="pre">aws</span></code> output, and check
<code class="docutils literal notranslate"><span class="pre">/var/log/cloud-init-output.log</span></code> or <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">determined-master</span></code>.</p></li>
</ol>
</section>
<section id="modifying-a-deployment">
<span id="aws-modifying-deployment"></span><h3>Modifying a Deployment<a class="headerlink" href="#modifying-a-deployment" title="Permalink to this heading">#</a></h3>
<p>To modify an already deployed cluster you have a few options:</p>
<ol class="arabic">
<li><p>If what you’d like to change is provided as a <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> CLI option, you can re-deploy the
cluster using <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code>. Use the same full <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> command as on cluster creation,
but update the options as necessary, while keeping the <code class="docutils literal notranslate"><span class="pre">cluster-id</span></code> the same. <code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code>
will then find the existing cluster, take it down, and spin up a new one with the updated
options.</p></li>
<li><p>If you want more control over the master configuration while minimizing downtime, you can SSH
into the master instance using the private key from the keypair that was used to provision the
cluster. Once you’re successfully connected, you can modify <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> under
<code class="docutils literal notranslate"><span class="pre">/usr/local/determined/etc</span></code> and restart the master Docker container for your changes to take
effect:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>container<span class="w"> </span>restart<span class="w"> </span>determined-master
</pre></div>
</div>
<p>For example, if you want to add or modify resource pools you can edit the master configuration
file at <code class="docutils literal notranslate"><span class="pre">/usr/local/determined/etc/master.yaml</span></code> and add a new resource pool entry.</p>
</li>
</ol>
</section>
</section>
<section id="manual-deployment">
<span id="aws-manual-deployment"></span><h2>Manual Deployment<a class="headerlink" href="#manual-deployment" title="Permalink to this heading">#</a></h2>
<section id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this heading">#</a></h3>
<p>Determined requires a PostgreSQL-compatible database, such as AWS Aurora. Configure the cluster to
use the database by including the database information in <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code>. Make sure to create a
database before running the Determined cluster (e.g., <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">DATABASE</span> <span class="pre">&lt;database-name&gt;</span></code>).</p>
<p>Example <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> snippet:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">db</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${database-user}&quot;</span>
<span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${database-password}&quot;</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${database-hostname}&quot;</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${database-name}&quot;</span>
</pre></div>
</div>
</section>
<section id="security-groups">
<h3>Security Groups<a class="headerlink" href="#security-groups" title="Permalink to this heading">#</a></h3>
<p>VPC Security Groups provide a set of rules for inbound and outbound network traffic. The
requirements for a Determined cluster are:</p>
<section id="master">
<h4>Master<a class="headerlink" href="#master" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Egress on all ports to agent security group</p></li>
<li><p>Egress on all ports to the Internet</p></li>
<li><p>Ingress on port 8080 for access the Determined WebUI and REST APIs</p></li>
<li><p>Ingress on port 22 for SSH (recommended but not required)</p></li>
<li><p>Ingress on all ports from agent security group</p></li>
</ul>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">MasterSecurityGroupEgress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupEgress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MasterSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">DestinationSecurityGroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65535</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>

<span class="nt">MasterSecurityGroupInternet</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupEgress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MasterSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">CidrIp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65535</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>

<span class="nt">MasterSecurityGroupIngress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupIngress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MasterSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">    </span><span class="nt">SourceSecurityGroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>

<span class="nt">MasterSecurityGroupIngressUI</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupIngress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MasterSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">    </span><span class="nt">CidrIp</span><span class="p">:</span><span class="w"> </span><span class="kt">!Ref</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InboundCIDRRange</span>

<span class="nt">MasterSSHIngress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupIngress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MasterSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">    </span><span class="nt">CidrIp</span><span class="p">:</span><span class="w"> </span><span class="kt">!Ref</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InboundCIDRRange</span>
</pre></div>
</div>
</section>
<section id="agent">
<h4>Agent<a class="headerlink" href="#agent" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Egress on all ports to the Internet</p></li>
<li><p>Ingress on all ports from master security group</p></li>
<li><p>Ingress on all ports from agent security group</p></li>
<li><p>Ingress on port 22 for SSH (recommended but not required)</p></li>
</ul>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">AgentSecurityGroupEgress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupEgress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">CidrIp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65535</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>

<span class="nt">AgentSecurityGroupIngressMaster</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupIngress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65535</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">    </span><span class="nt">SourceSecurityGroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MasterSecurityGroup.GroupId</span>

<span class="nt">AgentSecurityGroupIngressAgent</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupIngress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65535</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">    </span><span class="nt">SourceSecurityGroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>

<span class="nt">AgentSSHIngress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::EC2::SecurityGroupIngress</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">GroupId</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentSecurityGroup.GroupId</span>
<span class="w">    </span><span class="nt">IpProtocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
<span class="w">    </span><span class="nt">FromPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">    </span><span class="nt">ToPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
<span class="w">    </span><span class="nt">CidrIp</span><span class="p">:</span><span class="w"> </span><span class="kt">!Ref</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">InboundCIDRRange</span>
</pre></div>
</div>
</section>
</section>
<section id="iam-roles">
<h3>IAM Roles<a class="headerlink" href="#iam-roles" title="Permalink to this heading">#</a></h3>
<p>IAM roles comprise IAM policies, which provide access to AWS APIs such as the EC2 or S3 API. The IAM
policies needed for the Determined cluster are:</p>
<section id="id1">
<h4>Master<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Allow EC2 to assume role</p></li>
<li><p>Allow EC2 to describe, create, and terminate instances with agent role</p></li>
<li><p>Allow EC2 to describe, create, and terminate spot instance requests (only required if using spot
instances)</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">MasterRole</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::IAM::Role</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">AssumeRolePolicyDocument</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2012-10-17</span>
<span class="w">      </span><span class="nt">Statement</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Effect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
<span class="w">          </span><span class="nt">Principal</span><span class="p">:</span>
<span class="w">            </span><span class="nt">Service</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2.amazonaws.com</span>
<span class="w">          </span><span class="nt">Action</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sts:AssumeRole</span>
<span class="w">    </span><span class="nt">Policies</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">PolicyName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determined-agent-policy</span>
<span class="w">        </span><span class="nt">PolicyDocument</span><span class="p">:</span>
<span class="w">          </span><span class="nt">Version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2012-10-17</span>
<span class="w">          </span><span class="nt">Statement</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Effect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
<span class="w">              </span><span class="nt">Action</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:DescribeInstances</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:TerminateInstances</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:CreateTags</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:RunInstances</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:CancelSpotInstanceRequests</span><span class="w">      </span><span class="c1"># Only required if using spot instances</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:RequestSpotInstances</span><span class="w">            </span><span class="c1"># Only required if using spot instances</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:DescribeSpotInstanceRequests</span><span class="w">    </span><span class="c1"># Only required if using spot instances</span>
<span class="w">              </span><span class="nt">Resource</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">PolicyName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pass-role</span>
<span class="w">        </span><span class="nt">PolicyDocument</span><span class="p">:</span>
<span class="w">          </span><span class="nt">Version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2012-10-17</span>
<span class="w">          </span><span class="nt">Statement</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Effect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
<span class="w">              </span><span class="nt">Action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iam:PassRole</span>
<span class="w">              </span><span class="nt">Resource</span><span class="p">:</span><span class="w"> </span><span class="kt">!GetAtt</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AgentRole.Arn</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>Agent<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Allow EC2 to assume role</p></li>
<li><p>Allow S3 access for checkpoint storage</p></li>
<li><p>Allow agent instance to describe instances</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">AgentRole</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS::IAM::Role</span>
<span class="w">  </span><span class="nt">Properties</span><span class="p">:</span>
<span class="w">    </span><span class="nt">AssumeRolePolicyDocument</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2012-10-17</span>
<span class="w">      </span><span class="nt">Statement</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Effect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
<span class="w">          </span><span class="nt">Principal</span><span class="p">:</span>
<span class="w">            </span><span class="nt">Service</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2.amazonaws.com</span>
<span class="w">          </span><span class="nt">Action</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sts:AssumeRole</span>
<span class="w">    </span><span class="nt">Policies</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">PolicyName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">agent-s3-policy</span>
<span class="w">        </span><span class="nt">PolicyDocument</span><span class="p">:</span>
<span class="w">          </span><span class="nt">Version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2012-10-17</span>
<span class="w">          </span><span class="nt">Statement</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Effect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
<span class="w">              </span><span class="nt">Action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3:*&quot;</span>
<span class="w">              </span><span class="nt">Resource</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">PolicyName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determined-ec2</span>
<span class="w">        </span><span class="nt">PolicyDocument</span><span class="p">:</span>
<span class="w">          </span><span class="nt">Version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2012-10-17</span>
<span class="w">          </span><span class="nt">Statement</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Effect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span>
<span class="w">              </span><span class="nt">Action</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2:DescribeInstances</span>
<span class="w">              </span><span class="nt">Resource</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="master-node">
<h3>Master Node<a class="headerlink" href="#master-node" title="Permalink to this heading">#</a></h3>
<p>The master node should be deployed on an EC2 instance with at least 4 CPUs (Intel Broadwell or
later), 8GB of RAM, and 200GB of disk storage. This roughly corresponds to an EC2 t2.large instance
or better. The AMI should be the default Ubuntu 18.04 AMI.</p>
<p>To run Determined:</p>
<ol class="arabic">
<li><p>Install Docker and create the <code class="docutils literal notranslate"><span class="pre">determined</span></code> Docker network.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">remove</span> <span class="n">docker</span> <span class="n">docker</span><span class="o">-</span><span class="n">engine</span> <span class="n">docker</span><span class="o">.</span><span class="n">io</span> <span class="n">containerd</span> <span class="n">runc</span>
<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> \
  <span class="n">apt</span><span class="o">-</span><span class="n">transport</span><span class="o">-</span><span class="n">https</span> \
  <span class="n">ca</span><span class="o">-</span><span class="n">certificates</span> \
  <span class="n">curl</span> \
  <span class="n">gnupg</span><span class="o">-</span><span class="n">agent</span> \
  <span class="n">software</span><span class="o">-</span><span class="n">properties</span><span class="o">-</span><span class="n">common</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">fsSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">add</span> <span class="o">-</span>
<span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> \
  <span class="s2">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="se">\</span>
<span class="s2">  $(lsb_release -cs) </span><span class="se">\</span>
<span class="s2">  stable&quot;</span>
<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="n">cli</span> <span class="n">containerd</span><span class="o">.</span><span class="n">io</span>

<span class="n">docker</span> <span class="n">network</span> <span class="n">create</span> <span class="n">determined</span>
</pre></div>
</div>
</li>
<li><p>Configure the cluster with <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code>. See <a class="reference internal" href="../../_index.html#cluster-configuration"><span class="std std-ref">Step 7 - Configure the Cluster</span></a> for more
information.</p>
<p>Notes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">image_id</span></code> should be the latest Determined agent AMI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instance_type</span></code> should be any p2 or p3 EC2 instance type.</p></li>
<li><p>For more information about resource pools, see <a class="reference internal" href="../../../architecture/introduction.html#resource-pools"><span class="std std-ref">Resource Pools</span></a></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>An important assumption of Determined with dynamic agents is that any EC2 instances with the
configured tag_key:tag_value pair are managed by the Determined master. This pair should be
unique to your Determined installation. If it is not, Determined may inadvertently manage your
non-Determined EC2 instances.</p>
<p>If using spot instances, Determined also assumes that any EC2 spot instance requests with the
configured tag_key:tag_value pair are managed by the Determined master.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">checkpoint_storage</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3</span>
<span class="w">  </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${CheckpointBucket}</span>

<span class="nt">db</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${DBPassword}&quot;</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${Database.Endpoint.Address}&quot;</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5432</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determined</span>

<span class="nt">resource_pools</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pool_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">The default resource pool</span>
<span class="w">    </span><span class="nt">provider</span><span class="p">:</span>
<span class="w">      </span><span class="nt">iam_instance_profile_arn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${AgentInstanceProfile.Arn}</span>
<span class="w">      </span><span class="nt">image_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${AgentAmiId}</span>
<span class="w">      </span><span class="nt">agent_docker_image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determinedai/determined-agent:${Version}</span>
<span class="w">      </span><span class="nt">instance_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determined-agent-${UserName}</span>
<span class="w">      </span><span class="nt">instance_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${AgentInstanceType}</span>
<span class="w">      </span><span class="nt">master_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://local-ipv4:8080</span>
<span class="w">      </span><span class="nt">max_idle_agent_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${MaxIdleAgentPeriod}</span>
<span class="w">      </span><span class="nt">max_instances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${MaxInstances}</span>
<span class="w">      </span><span class="nt">network_interface</span><span class="p">:</span>
<span class="w">        </span><span class="nt">public_ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">security_group_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${AgentSecurityGroup.GroupId}</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws</span>
<span class="w">      </span><span class="nt">ssh_key_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${Keypair}</span>
<span class="w">      </span><span class="nt">tag_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determined-${UserName}</span>
<span class="w">      </span><span class="nt">tag_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">determined-${UserName}-agent</span>
</pre></div>
</div>
</li>
<li><p>Start the Determined master.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run \
  --rm \
  --network determined \
  -p 8080:8080 \
  -v master.yaml:/etc/determined/master.yaml \
  determinedai/determined-master:${Version}
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="dynamic-agents-aws.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Deploy Determined with Dynamic Agents</p>
      </div>
    </a>
    <a class="right-next"
       href="../gcp/_index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Deploy on GCP</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#det-deploy-tool"><code class="docutils literal notranslate"><span class="pre">det</span> <span class="pre">deploy</span></code> tool</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying">Deploying</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deployment-types">Deployment Types</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cli-arguments">CLI Arguments</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spinning-up-or-updating-the-cluster">Spinning up or updating the Cluster</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tearing-down-the-cluster">Tearing Down the Cluster</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-clusters">Listing Clusters</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#printing-the-default-master-yaml-template">Printing the default <code class="docutils literal notranslate"><span class="pre">master.yaml</span></code> template</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-master-yaml-templates">Custom master.yaml templates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#modifying-a-deployment">Modifying a Deployment</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-deployment">Manual Deployment</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#database">Database</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#security-groups">Security Groups</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#master">Master</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#agent">Agent</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iam-roles">IAM Roles</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Master</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Agent</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#master-node">Master Node</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Tara & LB
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, Determined AI.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>